<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Productos - El Harinero</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    .header-top {
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo-title img {
      height: 120px;
    }

    .nav-background {
      background-color: #402d2d;
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 40px;
    }

    .nav-links {
      list-style: none;
      display: flex;
      gap: 20px;
      padding: 0;
      margin: 0;
      padding-left: 500px;
    }

    .nav-links li a {
      text-decoration: none;
      color: #fef1cf;
      font-weight: bold;
      text-align: center;
    }

    /* Iconos de usuario y carrito */
    .extra-icons {
      display: flex;
      gap: 15px;
    }

    .extra-icons a {
      color: #fef1cf;
      font-size: 1.2rem;
    }

    .cart-icon {
      position: relative;
    }

    .contador-carrito {
      display: none;
      position: absolute;
      top: -8px;
      right: -8px;
      background-color: #c0392b;
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 0.7rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logout-container {
      display: none;
    }

    .logout-container a {
      color: #fef1cf;
      font-size: 0.9rem;
      text-decoration: none;
      padding: 5px 10px;
      border-radius: 5px;
      background-color: #5a3e3e;
      transition: all 0.3s;
    }

    .logout-container a:hover {
      background-color: #c0392b;
    }

    .fa-user-check {
      color: #4cc9f0 !important;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      background-image: url(fondoproductos.jpg);
      color: #333;
      padding: 40px;
    }

    .filtro {
      text-align: center;
      margin-bottom: 30px;
    }

    select {
      padding: 10px 15px;
      font-size: 1rem;
      border: 1px solid #402d2d;
      border-radius: 5px;
      outline: none;
      transition: all 0.3s ease;
    }

    select:hover {
      border-color: #c0392b;
    }

    .productos {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
    }

    .producto {
      background: #fef1cf;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .producto:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    }

    .producto img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 15px;
    }

    .categoria {
      background-color: #fef1cf;
      color: #402d2d;
      font-style: normal;
      border-radius: 80px;
    }

    .producto h3 {
      font-size: 1.2rem;
      color: #402d2d;
      margin-bottom: 8px;
    }

    .producto p {
      color: #402d2d;
      font-size: 0.95rem;
      margin-bottom: 10px;
    }

    .precio {
      font-weight: bold;
      color: #402d2d;
      font-size: 1.1rem;
      margin-bottom: 10px;
    }

    .btn-agregar {
      background-color: #402d2d;
      color: #fef1cf;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: bold;
    }

    .btn-agregar:hover {
      background-color: #5a3e3e;
    }

    /* Footer */
    footer {
      background-color: #402d2d;
      color: #fef1cf;
      text-align: center;
      padding: 20px;
      margin-top: 40px;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-top">
      <div class="logo-title">
        <img src="Logo.png" alt="Logo El Harinero" />
      </div>
    </div>
    <div class="nav-background">
      <nav class="navbar">
        <ul class="nav-links">
          <li><a href="ElHarinero.html">Inicio</a></li>
          <li><a href="nosotros.html">Nosotros</a></li>
          <li><a href="productos.html">Productos</a></li>
          <li><a href="contacto.html">Contacto</a></li>
          <li><a href="novedades.html">Novedades</a></li>
        </ul>
        <div class="extra-icons">
          <a href="login.html" class="user-icon">
            <i class="fas fa-user"></i>
          </a>
          <div class="logout-container">
            <a href="#" id="logout-btn">Cerrar sesión</a>
          </div>
          <a href="carrito.html" class="cart-icon">
            <i class="fas fa-shopping-cart"></i>
            <span class="contador-carrito"></span>
          </a>
        </div>
      </nav>
    </div>
  </header>

  <div class="filtro">
    <label for="categoria"></label>
    <select class="categoria" id="categoria" onchange="filtrarProductos()">
      <option value="todas">Todas las categorías</option>
      <option value="panaderia">Panadería</option>
      <option value="pasteleria">Pastelería</option>
      <option value="confiteria">Confitería</option>
      <option value="minutas">Minutas</option>
      <option value="bebidas">Bebidas</option>
      <option value="tortas">Tortas</option>
    </select>
  </div>

  <div class="productos" id="productos">
    <!-- Productos insertados dinámicamente -->
  </div>

  <footer>
    <p>&copy; El Harinero - Inés O'Hara 2023</p>
  </footer>

  <script>
    // Datos de productos con IDs únicos
    const productos = [
      {
        id: 1,
        nombre: "Pan de Masa Madre",
        descripcion: "Elaborado con fermentación natural.",
        precio: 2000,
        categoria: "panaderia",
        imagen: "masamadre.jpg"
      },
      {
        id: 2,
        nombre: "Pan Librito",
        descripcion: "Pan suave con forma de librito.",
        precio: 3500,
        categoria: "panaderia",
        imagen: "librito.jpg"
      },
      {
        id: 3,
        nombre: "Pan de Viena",
        descripcion: "Pan clásico estilo vienés.",
        precio: 3500,
        categoria: "panaderia",
        imagen: "viena.jpg"
      },
      {
        id: 4,
        nombre: "Torta de Chocolate",
        descripcion: "Deliciosa torta de chocolate con cobertura.",
        precio: 15000,
        categoria: "tortas",
        imagen: "tortachoco.jpg"
      },
      {
        id: 5,
        nombre: "Torta de Frutilla",
        descripcion: "Torta fresca con frutillas naturales.",
        precio: 12000,
        categoria: "tortas",
        imagen: "tortafrutilla.jpg"
      },
      {
        id: 6,
        nombre: "Torta Red Velvet",
        descripcion: "Clásica torta roja con crema de queso.",
        precio: 12000,
        categoria: "tortas",
        imagen: "tortaredvelvet.jpg"
      },
      {
        id: 7,
        nombre: "Alfajorcitos de maicena",
        descripcion: "Surtidos y coloridos.",
        precio: 5000,
        categoria: "confiteria",
        imagen: "alfajorcito.jpg"
      },
      {
        id: 8,
        nombre: "Conitos de DL",
        descripcion: "Conitos rellenos de dulce de leche.",
        precio: 6000,
        categoria: "confiteria",
        imagen: "conitodyl.jpeg"
      },
      {
        id: 9,
        nombre: "Hojaldre de DL",
        descripcion: "Hojaldre relleno de dulce de leche.",
        precio: 6000,
        categoria: "confiteria",
        imagen: "tortahojaldre.jpg"
      },
      {
        id: 10,
        nombre: "Rollito de Jamón y Queso",
        descripcion: "Receta tradicional.",
        precio: 3000,
        categoria: "minutas",
        imagen: "rollito.jpg"
      },
      {
        id: 11,
        nombre: "Empanada de pollo",
        descripcion: "Deliciosas empanadas de pollo.",
        precio: 3000,
        categoria: "minutas",
        imagen: "pollo.jpg"
      },
      {
        id: 12,
        nombre: "Empanada de choclo",
        descripcion: "Empanadas rellenas de choclo.",
        precio: 3000,
        categoria: "minutas",
        imagen: "choclo.jpg"
      },
      {
        id: 13,
        nombre: "Empanada Chilena",
        descripcion: "Empanadas estilo chileno.",
        precio: 3000,
        categoria: "minutas",
        imagen: "chilena.jpg"
      },
      {
        id: 14,
        nombre: "Empanada de carne",
        descripcion: "Sabrosa y cremosa.",
        precio: 3200,
        categoria: "minutas",
        imagen: "carne.jpg"
      },
      {
        id: 15,
        nombre: "Empanada Tukatai",
        descripcion: "Empanadas con carne molida y huevo.",
        precio: 3200,
        categoria: "minutas",
        imagen: "tukatai.jpg"
      },
      {
        id: 16,
        nombre: "Pastafrola",
        descripcion: "Clásica pastafrola con dulce de membrillo.",
        precio: 3200,
        categoria: "pasteleria",
        imagen: "pastafrola.jpg"
      },
      {
        id: 17,
        nombre: "Medialuna de DL",
        descripcion: "Medialunas rellenas de dulce de leche.",
        precio: 3200,
        categoria: "pasteleria",
        imagen: "medialunadyl.jpg"
      },
      {
        id: 18,
        nombre: "Pan de chocolate",
        descripcion: "Pan relleno de chocolate.",
        precio: 3200,
        categoria: "pasteleria",
        imagen: "panchocolate.jpg"
      },
      {
        id: 19,
        nombre: "Café",
        descripcion: "Caliente y aromático.",
        precio: 4000,
        categoria: "bebidas",
        imagen: "cafeconleche.jpg"
      },
      {
        id: 20,
        nombre: "Coca Cola",
        descripcion: "Refresco de cola.",
        precio: 4000,
        categoria: "bebidas",
        imagen: "cocacola.jpeg"
      },
      {
        id: 21,
        nombre: "Jugo de durazno natural",
        descripcion: "Frutas frescas exprimidas.",
        precio: 4500,
        categoria: "bebidas",
        imagen: "jugodurazno.jpg"
      }
    ];

    const contenedor = document.getElementById("productos");

    // Mostrar todos los productos al cargar la página
    function mostrarProductos(lista) {
      contenedor.innerHTML = "";
      lista.forEach(p => {
        const div = document.createElement("div");
        div.className = "producto";
        div.innerHTML = `
          <img src="${p.imagen}" alt="${p.nombre}">
          <h3>${p.nombre}</h3>
          <p>${p.descripcion}</p>
          <div class="precio">$${p.precio.toFixed(2)}</div>
          <button class="btn-agregar" onclick="agregarAlCarrito(${p.id})">Agregar al carrito</button>
        `;
        contenedor.appendChild(div);
      });
    }

    // Filtrar productos por categoría
    function filtrarProductos() {
      const categoria = document.getElementById("categoria").value;
      if (categoria === "todas") {
        mostrarProductos(productos);
      } else {
        const filtrados = productos.filter(p => p.categoria === categoria);
        mostrarProductos(filtrados);
      }
    }

    // Carrito y sesión
    function agregarAlCarrito(idProducto) {
      const producto = productos.find(p => p.id === idProducto);
      if (!producto) return;

      let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      const itemExistente = carrito.find(item => item.id === idProducto);

      if (itemExistente) {
        itemExistente.cantidad += 1;
      } else {
        carrito.push({
          id: producto.id,
          nombre: producto.nombre,
          precio: producto.precio,
          imagen: producto.imagen,
          descripcion: producto.descripcion,
          cantidad: 1
        });
      }

      localStorage.setItem('carrito', JSON.stringify(carrito));
      actualizarContadorCarrito();
      alert(`${producto.nombre} agregado al carrito`);
    }

    function actualizarContadorCarrito() {
      const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      const contador = document.querySelector('.contador-carrito');
      
      if (contador) {
        contador.textContent = carrito.length;
        contador.style.display = carrito.length > 0 ? 'block' : 'none';
      }
    }

    function verificarSesion() {
      const usuarioLogueado = localStorage.getItem('usuarioLogueado');
      const userIcon = document.querySelector('.user-icon i');
      const logoutContainer = document.querySelector('.logout-container');

      if (usuarioLogueado) {
        userIcon.classList.remove('fa-user');
        userIcon.classList.add('fa-user-check');
        logoutContainer.style.display = 'block';
      } else {
        userIcon.classList.remove('fa-user-check');
        userIcon.classList.add('fa-user');
        logoutContainer.style.display = 'none';
      }
    }

    // Inicialización
    document.addEventListener('DOMContentLoaded', function() {
      // Inicializar carrito si no existe
      if (!localStorage.getItem('carrito')) {
        localStorage.setItem('carrito', JSON.stringify([]));
      }

      mostrarProductos(productos);
      actualizarContadorCarrito();
      verificarSesion();

      // Manejar cierre de sesión
      const logoutBtn = document.getElementById('logout-btn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', function(e) {
          e.preventDefault();
          localStorage.removeItem('usuarioLogueado');
          verificarSesion();
          window.location.href = "ElHarinero.html";
        });
      }
    });
  </script>
</body>
</html>